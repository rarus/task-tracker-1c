
&НаСервере
Процедура ПривестиТипЗначениеКТипуАналитики(Строка)
	
	СтрокаАналитики = Объект.ДоступныеВидыАналитик.НайтиПоИдентификатору(Строка);
	ТипЗначенияАналитики = СтрокаАналитики.Аналитика.ТипЗначения;
	Элементы.ДоступныеВидыАналитикиЗначениеПоУмолчанию.ОграничениеТипа = ТипЗначенияАналитики;
	тз_ОбщегоНазначенияВызовСервераТрекер.ЗаписатьОперациюБизнесСтатистики("ОткрытиеФормыПрофиляЗаданий");
КонецПроцедуры

&НаКлиенте
Процедура ДоступныеВидыАналитикиАналитикаПриИзменении(Элемент)
	ТекущиеДанные = Элементы.ДоступныеВидыАналитики.ТекущиеДанные;
	Если ТекущиеДанные = Неопределено Или Не ЗначениеЗаполнено(ТекущиеДанные.Аналитика) Тогда
		Возврат;
	КонецЕсли;
	ПривестиТипЗначениеКТипуАналитики(Элементы.ДоступныеВидыАналитики.ТекущаяСтрока);
КонецПроцедуры

&НаКлиенте
Процедура ДоступныеВидыАналитикиПриАктивизацииСтроки(Элемент)
	ТекущиеДанные = Элементы.ДоступныеВидыАналитики.ТекущиеДанные;
	Если ТекущиеДанные = Неопределено Или Не ЗначениеЗаполнено(ТекущиеДанные.Аналитика) Тогда
		Возврат;
	КонецЕсли;
	ПривестиТипЗначениеКТипуАналитики(Элементы.ДоступныеВидыАналитики.ТекущаяСтрока);
КонецПроцедуры

&НаСервере
Процедура ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
	ТаблицаДляПроверкиДублей = Объект.ДоступныеВидыАналитик.Выгрузить(,"Аналитика");
	ТаблицаДляПроверкиДублей.Свернуть("Аналитика");
	Если Объект.ДоступныеВидыАналитик.Количество() <> ТаблицаДляПроверкиДублей.Количество() Тогда
		ТекстСообщения = НСтр("ru='В таблице аналитик найдены дубли. Удалите дубли для записи профиля.'");
		тз_ОбщегоНазначенияКлиентСервер.СообщитьПользователю(ТекстСообщения,,,,Отказ);
	КонецЕсли;
КонецПроцедуры
